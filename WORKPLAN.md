# Photo-Watermark 项目工作计划

## 项目概述

开发一个Python命令行工具，用于读取图片EXIF信息中的拍摄时间，并将其作为水印添加到图片上。

## 功能模块划分

### 1. EXIF信息读取模块
- 实现图片EXIF信息的读取功能
- 提取拍摄时间信息
- 处理无EXIF信息或EXIF信息不完整的异常情况

### 2. 命令行参数解析模块
- 解析用户输入的图片路径
- 解析用户设置的字体大小、颜色和位置参数
- 提供帮助信息显示功能

### 3. 图片处理与水印添加模块
- 根据参数设置在图片上绘制文本水印
- 实现多种水印位置选项
- 保持原图片质量

### 4. 文件输出模块
- 创建目标目录（[原目录]_watermark）
- 保存处理后的图片到指定位置
- 保持原文件名和格式

## 详细开发计划

### 第一阶段：环境搭建与基础功能实现（1-2天）
- [ ] 创建项目目录结构
- [ ] 编写requirements.txt文件，确定所需依赖
- [ ] 实现EXIF信息读取功能
- [ ] 实现基础的命令行参数解析

### 第二阶段：核心功能开发（3-5天）
- [ ] 实现图片水印添加功能
- [ ] 支持自定义字体大小、颜色
- [ ] 实现多种水印位置选项
- [ ] 实现输出目录自动创建功能

### 第三阶段：完善与测试（6-7天）
- [ ] 异常处理（无效文件、无EXIF信息等）
- [ ] 编写单元测试
- [ ] 进行功能测试和兼容性测试
- [ ] 优化性能和代码质量

### 第四阶段：文档完善与发布（第8天）
- [ ] 编写使用说明文档
- [ ] 完善README.md
- [ ] 打包发布准备

## 技术选型

- **主要语言**：Python 3.6+
- **图片处理库**：Pillow (PIL)
- **EXIF处理库**：piexif 或 ExifRead
- **命令行解析**：argparse
- **测试框架**：pytest

## 风险评估与应对

1. **EXIF信息兼容性问题**
   - 风险：不同相机厂商的EXIF格式可能有差异
   - 应对：实现多种EXIF时间字段的读取备选方案

2. **图片格式支持问题**
   - 风险：某些特殊格式可能不支持
   - 应对：明确支持的格式列表，对不支持格式给出明确提示

3. **大图片处理性能问题**
   - 风险：处理大尺寸图片时内存占用高
   - 应对：优化算法，必要时实现分块处理

## 验收标准

- [ ] 能够正确读取JPEG图片的EXIF拍摄时间
- [ ] 支持不同水印位置设置
- [ ] 支持自定义字体大小和颜色
- [ ] 正确创建输出目录并保存处理后的图片
- [ ] 对异常情况有适当的错误提示